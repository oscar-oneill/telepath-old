import vreddit from"./domains/vreddit.js";import ireddit from"./domains/ireddit.js";import imgur from"./domains/imgur.js";import streamable from"./domains/streamable.js";import gfycat from"./domains/gfycat.js";let objects=document.querySelector(".objects"),queryString=window.location,name=queryString.pathname.slice(11);const setFavicon=async()=>{const t=await fetch(`https://api.reddit.com/r/${name}/about`),e=await t.json(),i=e.data.community_icon?e.data.community_icon.slice(0,79):"https://www.vectorico.com/wp-content/uploads/2018/08/Reddit-logo-300x300.png";document.getElementById("favicon").setAttribute("href",i)};setFavicon();const fetchSubreddit=async()=>{const t=await fetch("/subreddit",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({queryString:queryString})}),e=await t.json();(()=>{let t=0;for(t=0;t<e.length;t++){const i={year:"numeric",month:"long",day:"numeric"},o=e[t].created_utc,n=new Date(1e3*o).toLocaleDateString("en-US",i),r=e[t].domain,a=e[t].subreddit_name_prefixed,c=e[t].url,d=e[t].title,s=e[t].ups,m=e[t].author,u=e[t].link_flair_text,l=e[t],p=e[t].subreddit;vreddit(r,a,d,s,m,n,u,l,p),gfycat(r,a,c,d,s,m,n,u,l,p),imgur(r,a,c,d,s,m,n,u,l,p),ireddit(r,a,c,d,s,m,n,u,l,p),streamable(r,a,c,d,s,m,n,u,l,p),document.title=a+" | Telepath"}})()};fetchSubreddit(),form.addEventListener("submit",t=>{const e=document.querySelector(".input-request").value;objects.innerHTML="",console.clear(),t.preventDefault(),location.href="/subreddit/"+e});